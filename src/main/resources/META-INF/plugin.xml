<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin require-restart="false">
    <!-- Unique identifier of the plugin. It should be FQN. It cannot be changed between the plugin versions. -->
    <id>net.fallingangel.jimmer-dto</id>

    <!-- Public plugin name should be written in Title Case.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-name -->
    <name>JimmerDTO</name>

    <!-- A displayed Vendor name or Organization ID displayed on the Plugins Page. -->
    <vendor email="the.fallenangel.965@gmail.com" url="https://fallingangel.net">the_FallenAngel</vendor>

    <!-- Description of the plugin displayed on the Plugin Page and IDE Plugin Manager.
         Simple HTML elements (text formatting, paragraphs, and lists) can be added inside of <![CDATA[ ]]> tag.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-description -->
    <description><![CDATA[
    <h3>English:</h3>
    <ul>
    <li>Provide syntax support for the DTO language of the Jimmer framework.</li>
    <li>Provide legality check for hard-coded strings of Jimmer entity interfaces, supporting Java and Kotlin.</li>
    </ul>
    <h3>中文：</h3>
    <ul>
    <li>为Jimmer框架的DTO语言提供语法支持</li>
    <li>为Jimmer实体接口的硬编码字符串提供合法检测，支持Java、Kotlin</li>
    </ul>
  ]]></description>

    <change-notes><![CDATA[
    <p><b>0.0.7.10 (2024-02-07)</b></p>
    <ul>
      <li><b>Refactor</b>Adjustment of recursive prop</li>
      <li><b>Bug Fix</b>Fix like function's mishandling of its modifiers</li>
    </ul>
    <ul>
      <li><b>特性调整</b>调整递归属性</li>
      <li><b>修复Bug</b>修正like函数对其修饰符的不当处理</li>
    </ul>
    <hr/>
    <p><b>0.0.7.9 (2024-02-06)</b></p>
    <ul>
      <li><b>Bug Fix</b>Fixed the problem of not being able to get props in the kotlin entity tree</li>
    </ul>
    <ul>
      <li><b>修复Bug</b>修正无法获取kotlin实体树中属性的问题</li>
    </ul>
    <hr/>
    <p><b>0.0.7.8 (2023-12-29)</b></p>
    <ul>
      <li><b>Bug Fix</b>Fixed the problem that deleting the generated dto class after saving the dto file did not take effect when export was specified in the dto file but not the package</li>
    </ul>
    <ul>
      <li><b>修复Bug</b>修正在dto文件中指定了export但没有指定package时，保存dto文件后删除生成的dto类未生效的问题</li>
    </ul>
    <hr/>
    <p><b>0.0.7.7 (2023-12-08)</b></p>
    <ul>
      <li><b>Feature</b>Support 2023.3</li>
    </ul>
    <ul>
      <li><b>新特性</b>适配2023.3</li>
    </ul>
    <hr/>
    <p><b>0.0.7.6 (2023-12-03)</b></p>
    <ul>
      <li><b>Feature</b>Listen for changes to the dto file and delete the generated dto classes after the dto file has been modified</li>
    </ul>
    <ul>
      <li><b>新特性</b>监听dto文件改动事件，dto文件修改后删除其生成的dto类</li>
    </ul>
    <hr/>
    <p><b>0.0.7.5 (2023-11-19)</b></p>
    <ul>
      <li><b>Bug Fix</b>Fix the problem of not being able to get the target class path of a dto file with the export and package keywords specified</li>
      <li><b>Bug Fix</b>Fix the problem that when the entity specified by the export keyword has a parent entity, not all of its attributes can be retrieved</li>
    </ul>
    <ul>
      <li><b>修复Bug</b>修复无法获取指定了export和package关键字的dto文件目标类路径的问题</li>
      <li><b>修复Bug</b>修复export关键字指定的实体有父级实体时，无法获取其全部属性的问题</li>
    </ul>
    <hr/>
    <p><b>0.0.7.4 (2023-11-14)</b></p>
    <ul>
      <li><b>Feature</b>Add substantial support for the export keyword to obtain entity information from the keyword</li>
    </ul>
    <ul>
      <li><b>新特性</b>添加对export关键字的实质性支持，从关键字获取实体信息</li>
    </ul>
    <hr/>
    <p><b>0.0.7.3 (2023-11-13)</b></p>
    <ul>
      <li><b>Feature</b>Support for export and package keywords</li>
      <li><b>Feature</b>Support for this keyword</li>
    </ul>
    <ul>
      <li><b>新特性</b>对export、package关键字的支持</li>
      <li><b>新特性</b>对this关键字的支持</li>
    </ul>
    <hr/>
    <p><b>0.0.7.2 (2023-11-06)</b></p>
    <ul>
      <li><b>Bug Fix</b>When getting props in an entity, also get props in the parent entity</li>
    </ul>
    <ul>
      <li><b>修复Bug</b>获取实体中的属性时，也获取父级实体中的属性</li>
    </ul>
    <hr/>
    <p><b>0.0.7.1 (2023-11-03)</b></p>
    <ul>
      <li><b>Feature</b>Support for predicate methods in spec dto</li>
      <li><b>Feature</b>Modifier adjustments and corresponding adjustments to inheritance</li>
      <li><b>Feature</b>Support for method markers</li>
    </ul>
    <ul>
      <li><b>新特性</b>对spec dto中的谓词方法支持</li>
      <li><b>新特性</b>修饰符调整，并对继承做出相应调整</li>
      <li><b>新特性</b>对方法标记符的支持</li>
    </ul>
    <hr/>
    <p><b>0.0.7 (2023-11-02)</b></p>
    <ul>
      <li><b>Bug Fix</b>When prompted for Dto inheritance, the type of user-prop prompt appears</li>
      <li><b>Feature</b>Dto Modifier Hints</li>
      <li><b>Feature</b>Dto Inheritance Hints</li>
      <li><b>Feature</b>Enum-Mapping Hints</li>
      <li><b>Feature</b>alias-group hints</li>
      <li><b>Feature</b>Function Hints</li>
      <li><b>Feature</b>Macro Hints</li>
      <li><b>Feature</b>Prop Hints</li>
      <li><b>Feature</b>Negative Prop Hints</li>
      <li><b>Feature</b>Prop Nullability Flag</li>
    </ul>
    <ul>
      <li><b>修复Bug</b>在提示Dto继承时，出现了用户属性类型的提示</li>
      <li><b>新特性</b>Dto修饰符提示</li>
      <li><b>新特性</b>Dto继承提示</li>
      <li><b>新特性</b>枚举提示</li>
      <li><b>新特性</b>as组提示</li>
      <li><b>新特性</b>方法提示</li>
      <li><b>新特性</b>宏提示</li>
      <li><b>新特性</b>属性提示</li>
      <li><b>新特性</b>负属性提示</li>
      <li><b>新特性</b>属性可空性标识</li>
    </ul>
    <hr/>
    <p><b>0.0.6 (2023-09-18)</b></p>
    <ul>
      <li><b>Removal</b>Removed support for 2020.x, 2021.x IDEs</li>
      <li><b>Feature</b>Support to create/jump to dto file by "Right click/JimmerDtoFile" on entity interface file</li>
      <li><b>Feature</b>Add Gutter icon for dto definitions in dto file to jump directly to the generated class definition</li>
      <li><b>Feature</b>Added support for creating line comments and block comments via shortcut keys, but document comments still need to be created manually</li>
      <li><b>Feature</b>Added support for pairwise matching of parentheses</li>
      <li><b>Feature</b>Colorize [param-name =] for named parameters</li>
    </ul>
    <ul>
      <li><b>移除</b>删除了对 2020.x、2021.x IDE的支持</li>
      <li><b>新特性</b>支持通过在实体接口文件上『右键/JimmerDtoFile』创建/跳转dto文件</li>
      <li><b>新特性</b>在dto文件中为dto定义新增Gutter图标，可直接跳转生成的类定义</li>
      <li><b>新特性</b>新增通过快捷键创建行注释、块注释，但文档注释仍需手动创建</li>
      <li><b>新特性</b>新增括号的配对匹配</li>
      <li><b>新特性</b>为命名参数的[param-name =]上色</li>
    </ul>
    <hr/>
    <p><b>0.0.5 (2023-09-07)</b></p>
    <ul>
      <li><b>Feature</b>Add styles for negative properties</li>
      <li><b>Feature</b>Add error style prompts for original in the as group</li>
      <li><b>Bug Fix</b>Fixed an issue where incorrect styles would affect other languages</li>
    </ul>
    <ul>
      <li><b>新特性</b>为负属性添加样式</li>
      <li><b>新特性</b>为as组中的original添加错误样式提示</li>
      <li><b>修复Bug</b>修复错误样式会对其它语言有影响的问题</li>
    </ul>
    <hr/>
    <p><b>0.0.4 (2023-09-05)</b></p>
    <ul>
      <li><b>Bug Fix</b>Fix incorrect syntax color definitions, unaffect syntax coloring for all languages</li>
      <li><b>Bug Fix</b>Adjust BNF grammar and fix the issue of adding annotations to associated attributes that may result in errors</li>
    </ul>
    <ul>
      <li><b>修复Bug</b>修复错误的语法颜色定义，解除对所有语言的语法着色的影响</li>
      <li><b>修复Bug</b>调整BNF文法，修复为关联属性添加注解会报错的问题</li>
    </ul>
    <hr/>
    <p><b>0.0.3 (2023-09-02)</b></p>
    <ul>
      <li><b>Feature</b>Add syntax hints for user types and user type generics</li>
      <li><b>Feature</b>Add restrictions on method and macro names</li>
      <li><b>Feature</b>Add highlighting when DTO name is selected</li>
      <li><b>Bug Fix</b>Fixed the macro highlighting exception when a space exposes '#' and the macro name</li>
    </ul>
    <ul>
      <li><b>新特性</b>新增对用户类型及用户类型泛型的语法提示</li>
      <li><b>新特性</b>新增对方法名和宏名的限制</li>
      <li><b>新特性</b>加入选中DTO名称时的高亮</li>
      <li><b>修复Bug</b>修复宏的高亮在空格公开『#』和宏名时的异常显示</li>
    </ul>
    <hr/>
    <p><b>0.0.2 (2023-08-30)</b></p>
    <ul>
      <li><b>Feature</b>Add documentation comments</li>
      <li><b>Bug Fix</b>Add restrictions on the order in which import statements appear</li>
    </ul>
    <ul>
      <li><b>新特性</b>加入文档注释</li>
      <li><b>修复Bug</b>加入对import语句出现顺序的限制</li>
    </ul>
    <hr/>
    <p><b>0.0.1 (2023-08-29)</b></p>
    <ul>
      <li>Plugin published</li>
      <li>Provides basic syntax highlighting</li>
    </ul>
    <ul>
      <li>插件发布了</li>
      <li>提供了基本的语法高亮</li>
    </ul>
    ]]></change-notes>

    <!-- Product and plugin compatibility requirements.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html -->
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.java</depends>
    <depends>org.jetbrains.kotlin</depends>

    <actions>
        <group id="JimmerDTOEntityPopupMenu">
            <separator/>
        </group>

        <action id="CreateOrJumpToJimmerDtoFile" class="net.fallingangel.jimmerdto.action.CreateJimmerDtoFile" text="JimmerDto File"
                description="Create new JimmerDTO file or jump to it if exists" icon="Icons.icon_16">
            <add-to-group group-id="JimmerDTOEntityPopupMenu"/>
        </action>

        <group id="JimmerDTOEntityPopupMenuWrapper">
            <reference ref="JimmerDTOEntityPopupMenu"/>
            <add-to-group group-id="ProjectViewPopupMenu" anchor="after" relative-to-action="WeighingNewGroup"/>
        </group>
    </actions>

    <!-- Extension points defined by the plugin.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-extension-points.html -->
    <extensions defaultExtensionNs="com.intellij">
        <fileType
                name="JimmerDTO"
                implementationClass="net.fallingangel.jimmerdto.DTOFileType"
                fieldName="INSTANCE"
                language="JimmerDTO"
                extensions="dto"
        />

        <lang.parserDefinition
                language="JimmerDTO"
                implementationClass="net.fallingangel.jimmerdto.DTOParserDefinition"
        />
        <lang.syntaxHighlighterFactory
                language="JimmerDTO"
                implementationClass="net.fallingangel.jimmerdto.highlighting.DTOSyntaxHighlighterFactory"/>

        <colorSettingsPage implementation="net.fallingangel.jimmerdto.highlighting.DTOColorSettingsPage"/>
        <annotator language="JimmerDTO" implementationClass="net.fallingangel.jimmerdto.highlighting.DTOAnnotator"/>
        <additionalTextAttributes scheme="Default" file="colorSchemas/default.xml"/>

        <lang.braceMatcher language="JimmerDTO" implementationClass="net.fallingangel.jimmerdto.completion.DTOBraceMatcher"/>
        <lang.commenter language="JimmerDTO" implementationClass="net.fallingangel.jimmerdto.completion.DTOCommenter"/>
        <completion.contributor language="JimmerDTO" implementationClass="net.fallingangel.jimmerdto.completion.DTOCompletionContributor"/>

        <codeInsight.lineMarkerProvider language="JimmerDTO" implementationClass="net.fallingangel.jimmerdto.DTOLineMarkerProvider"/>
        <codeInsight.inlayProvider language="JimmerDTO" implementationClass="net.fallingangel.jimmerdto.highlighting.DTOInlayHintProvider"/>

        <psi.referenceContributor language="JimmerDTO" implementation="net.fallingangel.jimmerdto.reference.DTOReferenceContributor"/>
        <backgroundPostStartupActivity implementation="net.fallingangel.jimmerdto.service.StartupServices"/>
    </extensions>
</idea-plugin>
